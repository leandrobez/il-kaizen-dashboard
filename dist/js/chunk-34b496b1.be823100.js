(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34b496b1"],{4929:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"il-section il-section--student"},[s("ilStudent")],1)},r=[],a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"il-student"},[s("div",{staticClass:"il-student--content"},[s("ilAlert",{attrs:{has:!!t.message,msg:t.message}}),s("h3",{staticClass:"il-color--darkblue"},[t._v("Controle de Alunos")]),s("p",{staticClass:"il-color--light"},[t._v("Lorem ipsum dolor sit, amet consectetur adipisicing elit. Fugit, provident ab quis error quidem ducimus distinctio saepe dolorum deserunt delectus? Culpa nihil voluptatem ratione earum.")]),s("div",{staticClass:"il-sub--menu"},[s("router-link",{staticClass:"il-btn il-btn--submit",attrs:{to:{name:"student.create"},title:"Novo Aluno"}},[s("i",{staticClass:"mdi mdi-24px mdi-account"}),s("span",[t._v("Novo")])]),t.showBtnImp?s("a",{staticClass:"il-btn il-btn--submit",attrs:{href:"#!"},on:{click:function(e){return e.preventDefault(),t.printDoc(e)}}},[s("i",{staticClass:"mdi mdi-24px mdi-printer il-color--darkblue",attrs:{title:"Imprimir lista"}}),t._v("Imprimir")]):t._e(),t.showBtnPop?s("a",{staticClass:"il-btn il-btn--submit",attrs:{href:"#!"},on:{click:function(e){return e.preventDefault(),t.populate(e)}}},[s("i",{staticClass:"mdi mdi-24px mdi-cloud-upload il-color--darkblue",attrs:{title:"Popular o banco de dados"}}),t._v("Popular Banco")]):t._e(),s("a",{staticClass:"il-btn il-btn--submit",attrs:{href:"#!"},on:{click:function(e){return e.preventDefault(),t.remove(e)}}},[s("i",{staticClass:"mdi mdi-24px mdi-cloud-upload il-color--darkblue",attrs:{title:"Eliminar todos os alunos"}}),s("span",[t._v("Remover")])])],1),t.hasStudents?s("ilListStudent",{attrs:{students:t.students,payments:t.paymentStudents},on:{delete:t.deleteStudent,setAddress:t.setAddressCurrent}}):t._e(),t.hasAddress?s("div",{staticClass:"il-student--address"},[s("a",{staticClass:"il-close il-close--address",attrs:{href:"#!"},on:{click:function(e){return e.preventDefault(),t.close(e)}}},[s("i",{staticClass:"mdi mdi-close medi-12px"})]),s("ilAddress",{attrs:{addressCurrent:t.addressCurrent}})],1):t._e()],1)])},i=[],o=(s("8e6e"),s("456d"),s("28a5"),s("7f7f"),s("ac6a"),s("bd86")),u=s("aa5b"),l=s("6d20"),c=s("4da5"),d=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"il-lists"},[s("div",{staticClass:"il-search--student"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.word,expression:"word"}],attrs:{required:"",type:"search",placeholder:"Digite o nome do aluno"},domProps:{value:t.word},on:{input:[function(e){e.target.composing||(t.word=e.target.value)},function(e){return t.studentSearch()}]}}),t.searchs.length>0?s("div",{staticClass:"il-search--result"},[s("table",[s("tbody",[t._m(0),t._l(t.searchs,function(e,n){return s("tr",{key:n,class:e.ativo?"":"il-inactive"},[s("td",[t._v(t._s(n+1))]),s("td",[t._v(t._s(e.name))]),s("td",[s("a",{staticClass:"il-link--search",attrs:{href:"#student"+e._id,title:"Mais sobre esse aluno"}},[t._v("Ver")])])])})],2)])]):t._e()]),s("table",[t._m(1),s("tbody",t._l(t.students,function(e,n){return s("tr",{key:n,class:e.ativo?"":"il-inactive",attrs:{id:"student"+e._id}},[s("td",[t._v(t._s(n+1))]),s("td",[s("ul",{staticClass:"il-list--info"},[s("li",{staticClass:"name"},[t._v(t._s(e.name))])]),s("ul",{staticClass:"il-list--plan"},[s("li",{staticClass:"plus"},[t._v("Vezes: "+t._s(e.vezes))]),s("li",{staticClass:"value"},[t._v("Valor: "+t._s(e.valor))])])]),s("td",[t._v(t._s(t.checkStatusPayment(e._id)))]),s("td",[s("ul",{staticClass:"il-list--actions"},[s("li",[s("a",{attrs:{href:"!#"},on:{click:function(s){return s.preventDefault(),t.deleteStudent(e._id,n)}}},[s("i",{staticClass:"mdi mdi-12px mdi-delete",attrs:{title:"Eliminar cliente"}})])]),s("li",[s("a",{attrs:{href:"!#"},on:{click:function(s){return s.preventDefault(),t.editStudent(e._id)}}},[s("i",{staticClass:"mdi mdi-12px mdi-account-edit",attrs:{title:"Editar conta"}})])]),s("li",[s("router-link",{attrs:{to:{name:"student.register",params:{id:e._id}}}},[s("i",{staticClass:"mdi mdi-12px mdi-receipt",attrs:{title:" Matricular o aluno"}})])],1),s("li",[s("a",{attrs:{href:"!#"},on:{click:function(s){return s.preventDefault(),t.makePayment(n,e._id,"check")}}},[t.getStatusPayment(e._id)?t._e():s("i",{staticClass:"mdi mdi-12px mdi-script",attrs:{title:"Receber pagamento do cliente com cheque"}})])]),s("li",[s("a",{attrs:{href:"!#"},on:{click:function(s){return s.preventDefault(),t.makePayment(n,e._id,"money")}}},[t.getStatusPayment(e._id)?t._e():s("i",{staticClass:"mdi mdi-12px mdi-square-inc-cash",attrs:{title:"Receber pagamento do cliente com dinheiro"}})])]),s("li",[s("router-link",{attrs:{to:{name:"evaliation",params:{id:e._id}}}},[s("i",{staticClass:"mdi mdi-12px mdi-chart-line",attrs:{title:"Criar avaliação"}})])],1),s("li",[s("a",{attrs:{href:"!#"},on:{click:function(e){return e.preventDefault(),t.getAddress(n)}}},[s("i",{staticClass:"mdi mdi-12px mdi-account-location",attrs:{title:"Ver o Endereço"}})])])])])])}),0)])])},m=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[t._v("Nr")]),s("td",[t._v("Nome")]),s("td",[t._v("Ações")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("Nr")]),s("th",[t._v("Nome")]),s("th",[t._v("Pagamentos")]),s("th",[t._v("Ações")])])])}],h=(s("6762"),s("2fdb"),s("2f62"));function p(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)}return s}function f(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?p(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):p(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var v={name:"listStudent",props:{students:Array,payments:Array},data:function(){return{word:"",searchs:[]}},mounted:function(){""==this.word&&(this.searchs=[])},methods:f({},Object(h["b"])("evaliation",{setCurrentStudent:"setCurrentStudent"}),{studentSearch:function(){var t=this,e=this.word;if(e.length>4){var s=this.students.filter(function(e){return e.name.toLowerCase().includes(t.word.toLowerCase())});s.length>0&&(this.searchs=s)}else this.searchs=[]},checkClassPayment:function(t){var e=this.payments.filter(function(e){return e.studentID==t});return e.length>0?"check"==e[0].formPayment?"il-background--gradient-great-whale ":"il-background--dark il-color--light":""},checkStatusPayment:function(t){var e=this.payments.filter(function(e){return e.studentID==t});return e.length>0?"OK - ".concat(e[0].formPayment):"Sem registro"},getStatusPayment:function(t){var e=this.payments.filter(function(e){return e.studentID==t});return e.length>0},deleteStudent:function(t,e){this.$emit("delete",e)},editStudent:function(t){this.$router.push({name:"student.edit",params:{id:t}})},makePayment:function(t,e,s){var n=JSON.stringify({name:this.students[t].name,valor:this.students[t].valor});window.localStorage.setItem("student",n),this.$router.push({name:"payment",params:{id:e,type:s}})},getAddress:function(t){this.$emit("setAddress",t)}})},b=v,g=s("2877"),_=Object(g["a"])(b,d,m,!1,null,null,null),y=_.exports,C=s("eba2"),w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"il-lists no-shadow"},[s("table",{staticClass:"il-form--lists"},[s("tbody",[t._m(0),s("tr",[s("td",[s("ul",{staticClass:"il-list--items__address"},[s("li",[t._v(t._s(t.addressCurrent.name))]),s("li",[t._v(t._s(t.addressCurrent.email)+" ")]),s("li",[t._v(" "+t._s(t.addressCurrent.dnasc))])])]),s("td",[s("ul",{staticClass:"il-list--items__address"},[s("li",[t._v(t._s(t.addressCurrent.cep))]),s("li",[t._v(t._s(t.addressCurrent.rua_av)+" nr "+t._s(t.addressCurrent.nr))]),s("li",[t._v(t._s(t.addressCurrent.suburb))])])]),s("td",[s("ul",{staticClass:"il-list--items__address"},[s("li",[t._v(t._s(t.addressCurrent.complemento))]),s("li",[t._v(t._s(t.addressCurrent.city)+"/"+t._s(t.addressCurrent.UF))]),s("li",[t._v(t._s(t.addressCurrent.fone)+"/"+t._s(t.addressCurrent.clr))])])])])])])])},P=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("td",[t._v("Aluno")]),s("td",[t._v("Logradouro")]),s("td",[t._v("Detalhes")])])}],O={name:"listAddress",props:{addressCurrent:Object}},S=O,A=Object(g["a"])(S,w,P,!1,null,null,null),k=A.exports;function j(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)}return s}function D(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?j(s,!0).forEach(function(e){Object(o["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):j(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var x=s("b82d"),E={name:"indexStudent",components:{ilListStudent:y,ilAddress:k,ilAlert:C["a"]},data:function(){return{monthCurrent:null,students:[],addressCurrent:null,paymentStudents:[],message:null,showAddress:!1}},computed:D({},Object(h["c"])("admin",{getToken:"getToken"}),{showBtnPop:function(){return 0==this.students.length},showBtnImp:function(){return this.students.length>0},hasStudents:function(){return this.students.length>0},checkAlert:function(){return!!this.alert.message&&(this.clearAlert(),!0)},hasAddress:function(){return!!this.showAddress}}),mounted:function(){this.setToday(),this.getPayment(),this.setStudents()},methods:D({},Object(h["b"])("payment",{setPayments:"setPayments"}),{printDoc:function(){window.print()},setToday:function(){var t=new Date,e=t.getMonth();this.monthCurrent=u["a"][e].abr},setStudents:function(){var t=this;l["a"].getStudents().then(function(e){null===e.error&&e.student.length>0?(t.students=e.student,t.students.forEach(function(e,s){e.valor=t.getDesc(s)})):e.error&&t.setAlert({type:"warning",message:e.message.value})}).catch(function(e){t.setAlert({type:"danger",message:"Você não tem permisssão para acessar essa página! "+e+" Você será redirecionado para página de login em 4 seg"}),setTimeout(function(){t.$router.push({name:"home"})},3e3)})},populate:function(){var t=window.confirm("Realmente deseja realizar esse procedimento agora?");if(t){var e=x.populateStudent();//!Call API to make seed
if(e.error)this.setAlert({type:e.message.status,message:e.message.value});else{var s=e.data,n=this;s.forEach(function(t){l["a"].createMultiple(t).then(function(t){if(""==t.data.error)n.setAlert({type:"success",message:"Cliente cadastrado com sucesso!"});else{var e=t.data.error;n.setAlert({type:"warning",message:e})}}).catch(function(t){n.setAlert({type:"warning",message:t})})})}}},remove:function(){var t=window.confirm("Realmente deseja realizar esse procedimento agora?");if(t){var e=[];this.students.forEach(function(t){var s=t._id;l["a"].removeStudent(s).then(function(t){e.push({ID:t})}).catch(function(t){console.log(t)})}),console.log(e)}},getPayment:function(){var t=this;c["a"].searchPaymentMonth(this.monthCurrent).then(function(e){null==e.data.error&&e.data.payment.length>0&&(t.paymentStudents=e.data.payment[0].students,t.setPayments(t.paymentStudents))}).catch(function(t){console.log(t)})},setAlert:function(t){this.message=t},getDesc:function(t){var e=this.students[t].valor,s=this.students[t].desc.perc;if(0!=s)return e-e*s/100;var n=this.students[t].desc.abs;return 0!=n?e-n:e},createStudent:function(){this.$router.push({path:"students/create"})},deleteStudent:function(t,e){var s=this,n=window.confirm("Realmente deseja eliminar "+this.students[e].name+" ?");n&&l["a"].removeStudent(t).then(function(t){t.error||(s.students.splice(e),s.setAlert({type:t.message.type,message:t.message.value}))}).catch(function(t){s.setAlert({type:"danger",message:"Você não tem permisssão para acessar essa página! "+t+" Você será redirecionado para página de login em 4 seg"}),setTimeout(function(){s.$router.push({name:"home"})},4e3)})},setAddressCurrent:function(t){var e=this,s=function(){var s=e.students[t].dnasc.split("T"),n=s[0].split("-");return"".concat(n[2],"/").concat(n[1],"/").concat(n[0])};this.addressCurrent=this.students[t].address,this.addressCurrent.name=this.students[t].name,this.addressCurrent.email=this.students[t].email,this.addressCurrent.dnasc=s(),this.showAddress=!0},close:function(){this.addressCurrent=null,this.showAddress=!1}})},M=E,$=(s("688e"),Object(g["a"])(M,a,i,!1,null,"709087f8",null)),I=$.exports,N={name:"student",components:{ilStudent:I}},J=N,L=Object(g["a"])(J,n,r,!1,null,null,null);e["default"]=L.exports},"4da5":function(t,e,s){"use strict";s("7f7f");var n=s("bc3a"),r=s.n(n),a=s("541e"),i={urlAPI:"/payment",baseURL:a["a"].base_url,points:[{name:"create",path:"/create"},{name:"alls",path:"/alls"},{name:"show",path:"/show"},{name:"showMonth",path:"/show/month"},{name:"update",path:"/update"},{name:"updateMultiple",path:"/update/pay"},{name:"remove",path:"/remove"}]},o=function(){return{headers:{authorization:"Bearer "+localStorage.getItem("_token")}}},u=function(t){for(var e=i.baseURL,s=a["a"].api_url+i.urlAPI,n=null,r=0;r<i.points.length;r++)if(i.points[r].name==t){n=i.points[r].path;break}return e+s+n},l={create:function(t){var e=u("create");return r.a.post(e,t,o()).then(function(t){return t}).catch(function(t){return Promise.reject(t.message)})},searchPayment:function(t){var e=u("show");return r.a.post(e+"/"+t,o()).then(function(t){return t}).catch(function(t){return Promise.reject(t.message)})},searchPaymentMonth:function(t){var e=u("showMonth");return r.a.get(e+"/"+t,o()).then(function(t){return t}).catch(function(t){return Promise.reject(t.message)})},getPayments:function(){var t=u("alls");return r.a.get(t,o()).then(function(t){return t}).catch(function(t){return Promise.reject(t.message)})},updatePayment:function(t,e){var s=u("update");return r.a.put(s+"/"+t,e,o()).then(function(t){var e=t.data;return e}).catch(function(t){return Promise.reject(t.message)})},updateMultiplePayment:function(t,e){var s=u("updateMultiple");return r.a.put(s+"/"+t,e,o()).then(function(t){var e=t.data;return e}).catch(function(t){return Promise.reject(t.message)})},removePayment:function(t){var e=u("remove");return r.a.delete(e+"/"+t,o()).then(function(t){var e=t.data;return e}).catch(function(t){return Promise.reject(t.message)})}};e["a"]=l},"688e":function(t,e,s){"use strict";var n=s("8620"),r=s.n(n);r.a},8620:function(t,e,s){},aa5b:function(t,e,s){"use strict";var n=[{abr:"Jan",label:"Janeiro"},{abr:"Fev",label:"Feveiro"},{abr:"Mar",label:"Março"},{abr:"Abr",label:"Abril"},{abr:"Mai",label:"Maio"},{abr:"Jun",label:"Junho"},{abr:"Jul",label:"Julho"},{abr:"Ago",label:"Agosto"},{abr:"Set",label:"Setembro"},{abr:"Out",label:"Outubro"},{abr:"Nov",label:"Novembro"},{abr:"Dez",label:"Dezembro"}];e["a"]=n}}]);
//# sourceMappingURL=chunk-34b496b1.be823100.js.map